(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t,a){e.exports=a(391)},389:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(172),s=a.n(o),c=a(17),l=a(49),i=a(21),u=a(174),m=a(82),h=a(183),f=Object(h.a)(),p=a(11),g=a(175),E="FETCH_GNOMES_BEGIN",d="FETCH_GNOMES_SUCCESS",v="FETCH_GNOMES_FAILURE",y="SET_API_ERROR",b="RESET_API_ERROR",O="SET_API_SUCCESS",N="RESET_API_SUCCESS",w="SET_NETWORK_ERROR",S={gnomes:[]};var C=function(e){return e.gnomes.gnomes},j=function(e){var t=[];return e.gnomes.gnomes.forEach(function(e){e.professions.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t},k=(Object(g.a)(C,j),function(e,t){var a=t.searchQuery,n=t.bodyParams,r=t.hairColor,o=t.profession,s=e;return a&&(s=s.filter(function(e){return e.name.toLowerCase().includes(a.toLowerCase())})),n&&s.sort(function(e,t){return e[n]-t[n]}),r&&(s=s.filter(function(e){return e.hair_color===r})),o&&(s=s.filter(function(e){return e.professions.includes(o)})),s}),_=a(61),G={message:null,status:!1};var R={message:null,status:!1};var P={status:!1};var A=Object(i.c)({router:Object(l.b)(f),gnomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(p.a)({},e,{gnomes:t.gnomes});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case y:return Object(p.a)({},e,{message:t.message,status:!0});case b:case _.LOCATION_CHANGE:return Object(p.a)({},e,{message:null,status:!1});default:return e}},success:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)({},e,{message:t.message,status:!0});case N:case _.LOCATION_CHANGE:return Object(p.a)({},e,{message:null,status:!1});default:return e}},fetching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;switch((arguments.length>1?arguments[1]:void 0).type){case E:return Object(p.a)({},e,{status:!0});case d:case v:return Object(p.a)({},e,{status:!1});default:return e}}});a(200),a(232);var T=a(62),F=a(63),I=a(86),Q=a(64),x=a(87),H=function(e){return{type:y,message:e}},B=function(){return{type:b}},D=function(){return{type:N}},L=a(178),J=a.n(L),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.response,n=e.message,r="";switch(a?a.status:null){case 401:r="You are not authenticated";break;case 403:r="You are not authorized to access this ressource.";break;case 500:r="".concat(t,". There was an internal error, please try again.");break;case 503:r="".concat(t,". The network connection is unavailable at the moment.");break;default:r=n}return r},U=function(e){try{var t=JSON.stringify(e),a=JSON.stringify(Date.now());localStorage.setItem("stateGnomes",t),localStorage.setItem("stateLastDataRefresh",a)}catch(n){}},q=function(){return function(e){e(B()),e({type:E}),e(D()),new Promise(function(e,t){J.a.get("https://raw.githubusercontent.com/rrafols/mobile_test/master/data.json").then(function(t){e(t.data.Brastlewark)}).catch(function(e){t(e)})}).then(function(t){e(function(e){return{type:d,gnomes:e}}(t)),U({gnomes:t})}).catch(function(t){e({type:v});var a=M(t,"Data could not be retrieved");e(H(a))})}},W=function(){var e=null;try{var t=localStorage.getItem("stateLastDataRefresh");if(null===t)return!0;e=JSON.parse(t)}catch(a){return!0}return Date.now()-3e5>e},V=function(){return new Promise(function(e,t){setTimeout(function(){try{var a=localStorage.getItem("stateGnomes");null===a&&t(),e(JSON.parse(a))}catch(n){t(n)}},0)})},Y=function(){return function(e){e(B()),e({type:E}),e(D()),V().then(function(t){var a;e((a=t.gnomes,{type:d,gnomes:a}))}).catch(function(){e({type:v});var t=M("Data could not be retrieved");e(H(t))})}},z=a(403),K=a(402),X=a(393),Z=a(404),$=a(394),ee=a(395),te=a(396),ae=a(397),ne=a(398),re=a(399),oe=function(e){var t=e.gnome,a=t.name,n=t.age,o=t.weight,s=t.height,c=t.hair_color,l=t.professions,i=t.friends,u=t.thumbnail,m=i.map(function(e,t){return r.a.createElement("li",{key:t},e)}),h=l.map(function(e,t){return r.a.createElement("li",{key:t},e)});return r.a.createElement(X.a,{className:"mb-4",sm:"12"},r.a.createElement($.a,null,r.a.createElement("img",{className:"card-img-top",src:u,alt:"Gnome Portrait"}),r.a.createElement(ee.a,null,a),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,"Age:"," ",n),r.a.createElement(ne.a,null,"height:"," ",s),r.a.createElement(ne.a,null,"weight:"," ",o),r.a.createElement(re.a,null,"Hair color:"," ",c),"Friends:",r.a.createElement("ul",null,m),"Professions:",r.a.createElement("ul",null,h))))},se=a(111),ce=a(400),le=a(401),ie=a(88),ue=function(e){return r.a.createElement(ie.c,{initialValues:{searchQuery:""},validationSchema:se.object().shape({queryString:se.string().typeError("Query needs to be a letter")}),onSubmit:function(t){e.filterGnomesByQuery(t)}},function(t){var a=t.errors,n=t.touched,o=t.submitForm,s=t.setFieldValue;return r.a.createElement(ie.b,null,r.a.createElement(ce.a,null,r.a.createElement(ie.a,{className:"form-control ".concat(a.searchQuery&&n.searchQuery&&"is-invalid"),type:"text",onChange:function(e){e.persist(),s("searchQuery",e.target.value,!1),o()},id:"searchQuery",name:"searchQuery",placeholder:"SEARCH GNOMES","aria-describedby":"Enter a query to search Gnomes data"}),a.searchQuery&&n.searchQuery&&r.a.createElement("div",{className:"invalid-feedback"},a.searchQuery)),r.a.createElement("div",{className:"form-row justify-content-between align-items-baseline"},r.a.createElement(ce.a,{className:"form-inline col-4"},r.a.createElement(le.a,{className:"font-weight-bold text-white",htmlFor:"bodyParams"},"Sort by Ascending"),r.a.createElement("select",{className:"form-control col-12",type:"checkbox",id:"bodyParams",name:"bodyParams",onChange:function(e){e.persist(),s("bodyParams",e.target.value,!1),o()}},r.a.createElement("option",{value:""},"Choose Body param"),r.a.createElement("option",{value:"age"},"Age"),r.a.createElement("option",{value:"weight"},"Weight"),r.a.createElement("option",{value:"height"},"Height"))),r.a.createElement(ce.a,{className:"form-inline col-4"},r.a.createElement(le.a,{className:"font-weight-bold text-white",htmlFor:"hairColor"},"Filter by hair"),r.a.createElement("select",{className:"form-control col-12",type:"checkbox",id:"hairColor",name:"hairColor",onChange:function(e){s("hairColor",e.target.value,!1),e.persist(),s("hairColor",e.target.value,!1),o()}},r.a.createElement("option",{value:""},"Choose a Hair color"),r.a.createElement("option",{value:"Green"},"Green"),r.a.createElement("option",{value:"Black"},"Black"),r.a.createElement("option",{value:"Red"},"Red"),r.a.createElement("option",{value:"Gray"},"Gray"),r.a.createElement("option",{value:"Pink"},"Pink"))),r.a.createElement(ce.a,{className:"form-inline col-4"},r.a.createElement(le.a,{className:"font-weight-bold text-white",htmlFor:"profession"},"Filter by"),r.a.createElement("select",{multiple:!0,className:"form-control col-12",type:"checkbox",id:"profession",name:"profession",onChange:function(e){e.persist(),s("profession",e.target.value,!1),o()}}," ",r.a.createElement("option",{value:""},"Choose a profession"),e.professions.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))})},me=a(9),he=a.n(me);Error.propTypes={message:he.a.string.isRequired};var fe=function(e){var t=e.message;return r.a.createElement(K.a,{className:"m-auto pt-2"},r.a.createElement(X.a,{xs:"12",md:"12",className:"alert alert-danger"},t))},pe=(a(389),function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(Q.a)(t)).call.apply(e,[this].concat(r)))).state={gnomes:a.props.gnomes,allGnomes:[]},a.getFiltered=function(e){var t=k(a.state.allGnomes,e);a.setState({gnomes:t})},a}return Object(x.a)(t,e),Object(F.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.gnomes;t!==this.props.gnomes&&this.setState({gnomes:t,allGnomes:t})}},{key:"render",value:function(){var e=null,t=this.props,a=t.loading,n=t.error,o=this.state.gnomes,s=n.status?r.a.createElement(fe,{message:n.message}):null;return e=a?r.a.createElement(z.a,{color:"secondary",className:"mx-auto mt-5"}):o.map(function(e){return r.a.createElement(oe,{key:e.id,gnome:e})}),r.a.createElement("div",{className:"dashboard-wrapper"},s,r.a.createElement(K.a,{className:"pt-5"},r.a.createElement(X.a,{className:"m-auto",sm:"12",md:"10"},r.a.createElement(ue,{professions:this.props.professions,filterGnomesByQuery:this.getFiltered}))),r.a.createElement(K.a,null,r.a.createElement(X.a,{className:"m-auto",sm:"12",md:"10"},r.a.createElement(K.a,null,r.a.createElement(Z.a,{className:"m-auto"},e)))))}}]),t}(n.PureComponent)),ge=Object(c.c)(function(e){return{gnomes:C(e),loading:e.fetching.status,professions:j(e),error:e.error}})(pe),Ee=function(e){function t(){return Object(T.a)(this,t),Object(I.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;W()?e(q()):e(Y())}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ge,null))}}]),t}(n.Component),de=Object(c.c)()(Ee),ve=Object(i.e)(A,Object(i.d)(Object(i.a)(Object(m.a)(f),u.a)));s.a.render(r.a.createElement(c.a,{store:ve},r.a.createElement(l.a,{history:f},r.a.createElement(de,null))),document.getElementById("root"))}},[[185,2,1]]]);
//# sourceMappingURL=main.940558ac.chunk.js.map